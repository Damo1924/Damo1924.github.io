---
title: "네트워크 플로우(Network Flow) 문제"
toc: true
toc_label: "On this page"
toc_icon: "chevron-right"
categories:
  - Algorithm
use_math: true
comments: true

---

## 1. Network Flow

네트워크 플로우는 특정한 지점에서 다른 지점으로 얼마나 많은 데이터가 흐르고 있는지를 측정하는 알고리즘이다.

이는 교통 체증 해결이나 네트워크 데이터 전송 등 다양한 분야에서 활용되고 있는 알고리즘이다.

그래프에서 각 간선마다 보낼 수 있는 최대 **유량(Flow)**을 **용량(Capacity)**이라고 하며, 그래프의 모든 간선에 대해 용량이 주어질 때 A에서 B로 최대로 보낼 수 있는 유량의 크기를 구하는 문제를 **최대 유량(Max Flow) 문제**라고 한다.

이러한 최대 유량 문제를 해결하는 것이 바로 네트워크 플로우 알고리즘이다.

## 1-1. Edmonds-Karp Algorithm

최대 유량 문제는 일반적으로 모든 경우의 수를 전부 탐색하여 최대 유량을 구하는데, 이때 BFS를 사용하는 방법을 에드워드-카프 알고리즘이라고 부른다.

알고리즘은 다음과 같다.

1) BFS를 통해 시작 지점에서 도착 지점까지 이어지는 경로를 하나 찾고, 배열을 하나 선언하여 경로를 저장한다.

2) 위에서 찾은 경로를 따라가면서 해당 경로로 지나갈 수 있는 최대 유량을 구한다.

3) 경로를 따라가면서 각 간선을 통과하는 유량에 앞에서 구한 값을 더해준다. 이때, 각 간선의 반대 방향으로 음의 유량이 지난다고 생각할 수 있으므로 각 간선의 반대 방향 유량에 앞에서 구한 값을 빼준다.

> 예를 들어 A에서 B로 가는 간선에 10만큼의 유량이 흐른다면 B에서 A로 가는 유량은 -10이라고 할 수 있다.
>
> 이를 고려해주어야 하는 이유는 B에서 A로 가는 경로가 존재할 수 있기 때문이다.
>
> B에서 A 방향으로 가는 경로를 발견했을 때, 해당 간선을 통과할 수 있는 최대 유량은 10 - 0 = 10이 아니라 10 - (-10) = 20이다.
>
> 즉, A에서 B로 가는 유량 10, B에서 A로 가는 유량 20을 더하면 B에서 A로 10만큼의 유량이 흐르는 것이므로 용량을 초과하지 않으면서 두 경로를 최대한으로 이용할 수 있게 된다.

4) 결과값에 위에서 구한 유량을 더해준다.

5) 위 과정(1 ~ 4)를 더 이상 시작 지점에서 끝 지점으로 가는 새로운 경로가 없을 때까지 반복한다.

이를 코드로 구현해보면 다음과 같이 나타낼 수 있다.

```cpp
